<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bedrock Games</title>
<link rel="icon" href="favicon.png" type="image/png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg: linear-gradient(135deg, #020208 0%, #0a0a15 50%, #04040a 100%);
    --muted: #9aa3a8;
    --accent: #8ef6c1;
    --accent-glow: rgba(142,246,193,0.4);
    --purple-strong: rgba(150,85,255,0.3);
    --purple-glow: rgba(150,85,255,0.2);
    --glass-border: rgba(255,255,255,0.12);
    --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0.02) 100%);
    font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:#f8fafc;overflow-x:hidden;font-weight:400}
  *{box-sizing:border-box}
  canvas#bg{position:fixed;inset:0;z-index:0;pointer-events:none;display:block;filter:brightness(1.2) contrast(1.1)}
  .vignette{position:fixed;inset:0;z-index:1;pointer-events:none;background:
      radial-gradient(50% 50% at 20% 20%, rgba(150,85,255,0.25), transparent 30%),
      radial-gradient(60% 60% at 80% 80%, rgba(122,58,210,0.20), transparent 35%),
      radial-gradient(40% 40% at 50% 10%, rgba(142,246,193,0.12), transparent 25%),
      radial-gradient(35% 35% at 10% 80%, rgba(236,72,153,0.08), transparent 20%),
      linear-gradient(180deg, rgba(8,6,14,0.08), rgba(2,2,6,0.15));
    mix-blend-mode:screen; animation:vignette-dance 12s ease-in-out infinite}
  @keyframes vignette-dance{0%,100%{opacity:1;transform:scale(1)}33%{opacity:0.9;transform:scale(1.02)}66%{opacity:0.85;transform:scale(0.98)}}
  .particles{position:fixed;inset:0;z-index:1;pointer-events:none;overflow:hidden}
  .particle{position:absolute;width:2px;height:2px;background:rgba(142,246,193,0.6);border-radius:50%;animation:float 15s infinite linear}
  @keyframes float{0%{transform:translateY(100vh) translateX(0) scale(0);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-10vh) translateX(100px) scale(1);opacity:0}}
  .wrap{position:relative;z-index:2;min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:32px;animation:grand-entrance 1.2s cubic-bezier(0.23,1,0.320,1)}
  @keyframes grand-entrance{0%{opacity:0;transform:translateY(40px) scale(0.95);filter:blur(10px)}50%{opacity:0.8;transform:translateY(10px) scale(0.98);filter:blur(2px)}100%{opacity:1;transform:translateY(0) scale(1);filter:blur(0)}}
  .card{width:100%;max-width:1400px;padding:28px;border-radius:24px;background:var(--gradient-glass);border:1px solid var(--glass-border);box-shadow:0 35px 100px rgba(0,0,0,0.8);position:relative;overflow:visible;backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);transition:all .3s}
  .hdr{display:flex;align-items:center;gap:20px;margin-bottom:24px;padding-bottom:20px;border-bottom:1px solid rgba(255,255,255,0.08);position:relative}
  .logo{width:68px;height:68px;border-radius:16px;background:linear-gradient(135deg,#1e1e2e,#16161d);display:grid;place-items:center;color:var(--accent);font-weight:800;box-shadow:0 15px 50px rgba(0,0,0,0.4);border:1px solid rgba(255,255,255,0.12);position:relative;overflow:hidden}
  .logo img{width:54px;height:54px;border-radius:12px;display:block;z-index:1;position:relative}
  h1{margin:0;font-size:26px;font-weight:900;background:linear-gradient(135deg,#fff 0%,var(--accent) 50%,#a855f7 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-0.5px;text-shadow:0 0 30px rgba(142,246,193,0.3)}
  .muted{color:var(--muted);font-size:15px;font-weight:500;opacity:.9}
  .controls{margin-left:auto;display:flex;gap:12px;align-items:center}
  .stealth-btn{padding:10px 16px;border-radius:12px;border:1px solid rgba(255,100,100,0.3);background:linear-gradient(135deg, rgba(255,100,100,0.15), rgba(220,38,38,0.1));color:#fca5a5;font-weight:700;cursor:pointer;font-size:14px;position:relative;overflow:hidden}
  .back-btn{border-color:rgba(100,100,255,0.3);background:linear-gradient(135deg, rgba(100,100,255,0.15), rgba(67,56,202,0.1));color:#c7d2fe}
  .games-content{display:grid;grid-template-columns:300px 1fr;gap:28px}
  .categories{padding:20px;border-radius:20px;background:var(--gradient-glass);border:1px solid rgba(255,255,255,0.06);backdrop-filter:blur(15px);height:fit-content;box-shadow:0 15px 50px rgba(0,0,0,0.4);position:relative;overflow:hidden}
  .category-btn{display:flex;align-items:center;gap:14px;padding:14px 18px;border-radius:14px;border:1px solid transparent;background:transparent;color:inherit;cursor:pointer;font-weight:600;font-size:15px;width:100%;margin-bottom:10px;transition:all .3s;text-align:left;position:relative;overflow:hidden}
  .category-btn.active{background:linear-gradient(135deg, rgba(142,246,193,0.12), rgba(140,90,240,0.12));color:var(--accent);border-color:rgba(142,246,193,0.3);box-shadow:0 15px 45px rgba(140,90,240,0.15)}
  .search-bar{width:100%;padding:14px 18px;border-radius:14px;border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.04);color:#f8fafc;font-size:15px;margin-bottom:20px;transition:all .3s;font-weight:500}
  .games-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}
  .game-card{border-radius:20px;padding:24px;border:1px solid rgba(255,255,255,0.08);min-height:160px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;transition:all .4s;background:var(--gradient-glass);backdrop-filter:blur(15px);position:relative;overflow:hidden;box-shadow:0 8px 25px rgba(0,0,0,0.2)}
  .game-card h3{margin:0 0 12px 0;font-size:19px;color:#f1f5f9;font-weight:800;display:flex;align-items:center;gap:10px}
  .game-card p{margin:0 0 20px 0;color:var(--muted);font-size:15px;line-height:1.5;font-weight:500;flex-grow:1}
  .game-meta{display:flex;justify-content:space-between;align-items:center;font-size:13px;color:var(--muted);font-weight:600}
  .difficulty{padding:4px 8px;border-radius:6px;font-size:12px;font-weight:700;text-transform:uppercase}
  .play-btn{padding:10px 18px;border-radius:10px;border:0;background:linear-gradient(135deg, rgba(142,246,193,0.15), rgba(140,90,240,0.1));color:var(--accent);font-weight:700;cursor:pointer;font-size:14px}
  .success-notification{position:fixed;top:20px;right:20px;z-index:9999;background:linear-gradient(135deg,var(--accent),#a8ffdb);color:#0a0a0a;padding:16px 24px;border-radius:16px;font-weight:700;font-size:15px;box-shadow:0 15px 50px rgba(0,0,0,0.4);transform:translateX(100%);transition:transform .4s;backdrop-filter:blur(10px)}
  .success-notification.show{transform:translateX(0)}
  @media (max-width:920px){.games-content{grid-template-columns:1fr}.categories{order:1;margin-top:24px}.games-grid{grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}.wrap{padding:24px}.card{padding:24px}}
  @media (max-width:480px){.wrap{padding:20px}.card{padding:20px}.controls{flex-direction:column;gap:10px}.games-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
  <canvas id="bg" aria-hidden="true"></canvas>
  <div class="vignette" aria-hidden="true"></div>
  <div class="particles" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card">
      <div class="hdr">
        <div class="logo">
          <img src="favicon.png" alt="Bedrock logo">
        </div>
        <div>
          <h1>Bedrock Games</h1>
          <div class="muted">Your stealth gaming sanctuary</div>
        </div>

        <div class="controls">
          <button class="stealth-btn" id="quickExit" title="Emergency stealth exit">‚ö° Quick Exit</button>
          <button class="stealth-btn back-btn" id="portalBtn" title="Return to portal">‚Üê Portal</button>
        </div>
      </div>

      <div class="games-content">
        <div class="categories">
          <input type="text" class="search-bar" placeholder="Search your arsenal..." id="searchBar">
          
          <button class="category-btn active" data-category="all">üéÆ All Games</button>
          <button class="category-btn" data-category="arcade">üëæ Arcade</button>
          <button class="category-btn" data-category="puzzle">üß© Puzzle</button>
          <button class="category-btn" data-category="strategy">üéØ Strategy</button>
          <button class="category-btn" data-category="multiplayer">üë• Multiplayer</button>
          <button class="category-btn" data-category="classic">üïπÔ∏è Classic</button>
          <button class="category-btn" data-category="creative">üé® Creative</button>
        </div>

        <div id="gamesContainer">
          <div class="category-section" data-category="all">
            <h2 class="category-title" style="margin:0 0 16px 0; font-size:22px; color:var(--accent); font-weight:800;">All Games</h2>
            <div class="games-grid" id="allGames">
              <!-- Games will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------------------------
   Visual background (starfield + nebula)
   --------------------------- */
(function(){
  const canvas = document.getElementById('bg');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;

  function rand(min,max){ return Math.random()*(max-min)+min }

  const STAR_COUNT = Math.floor((w*h)/2400);
  const stars = [];
  const nebula = [];

  for(let i=0;i<STAR_COUNT;i++){
    stars.push({
      x: Math.random()*w,
      y: Math.random()*h,
      z: rand(0.3,2.0),
      r: rand(0.8,5.0),
      vx: rand(-0.05,0.05),
      vy: rand(-0.1,0.1),
      t: Math.random()*20,
      color: Math.random() > 0.88 ? 'rgba(142,246,193,0.9)' : (Math.random() > 0.94 ? 'rgba(168,85,247,0.8)' : 'white'),
      twinkleSpeed: rand(0.5, 2.0)
    });
  }

  for(let i=0;i<8;i++){
    nebula.push({
      x: Math.random()*w,
      y: Math.random()*h,
      r: rand(80,200),
      vx: rand(-0.02,0.02),
      vy: rand(-0.02,0.02),
      opacity: rand(0.02,0.08),
      color: Math.random() > 0.5 ? 'rgba(142,246,193,' : 'rgba(168,85,247,'
    });
  }

  function resize(){ w = canvas.width = innerWidth; h = canvas.height = innerHeight; }
  addEventListener('resize', resize);

  function draw(){
    ctx.clearRect(0,0,w,h);
    const g1 = ctx.createRadialGradient(w*0.3,h*0.3,0,w*0.3,h*0.3,Math.max(w,h)*0.6);
    g1.addColorStop(0,'rgba(10,8,20,0.15)');
    g1.addColorStop(0.5,'rgba(6,4,14,0.25)');
    g1.addColorStop(1,'rgba(2,2,8,0.35)');
    ctx.fillStyle = g1; ctx.fillRect(0,0,w,h);

    const g2 = ctx.createRadialGradient(w*0.7,h*0.7,0,w*0.7,h*0.7,Math.max(w,h)*0.5);
    g2.addColorStop(0,'rgba(20,8,25,0.08)'); g2.addColorStop(1,'transparent');
    ctx.fillStyle = g2; ctx.fillRect(0,0,w,h);

    const t = Date.now()/3200;

    for(const n of nebula){
      n.x += n.vx; n.y += n.vy;
      if(n.x < -n.r) n.x = w + n.r;
      if(n.x > w + n.r) n.x = -n.r;
      if(n.y < -n.r) n.y = h + n.r;
      if(n.y > h + n.r) n.y = -n.r;
      const pulse = Math.abs(Math.sin(t * 0.3 + n.x * 0.001));
      ctx.beginPath();
      ctx.globalAlpha = Math.max(0, n.opacity * pulse);
      const g = ctx.createRadialGradient(n.x,n.y,0,n.x,n.y,n.r);
      g.addColorStop(0, n.color + (n.opacity * 2) + ')');
      g.addColorStop(1, 'transparent');
      ctx.fillStyle = g;
      ctx.arc(n.x, n.y, n.r, 0, Math.PI*2);
      ctx.fill();
    }

    for(const s of stars){
      s.x += s.vx * (s.z*2);
      s.y += s.vy * (s.z*2);
      const twinkle = Math.abs(Math.sin(t * s.twinkleSpeed + s.t)) * Math.abs(Math.cos(t * s.twinkleSpeed * 0.7 + s.t * 0.5));
      if(s.x<0) s.x = w;
      if(s.x>w) s.x = 0;
      if(s.y<0) s.y = h;
      if(s.y>h) s.y = 0;
      ctx.beginPath();
      ctx.globalAlpha = 0.7 + 0.3 * s.z * (0.3 + twinkle*0.7);
      ctx.fillStyle = s.color;
      ctx.arc(s.x, s.y, s.r * s.z, 0, Math.PI*2);
      ctx.fill();
      if(s.r > 3 || s.color !== 'white'){
        ctx.beginPath();
        ctx.globalAlpha = 0.15 * s.z * twinkle;
        ctx.arc(s.x, s.y, s.r * s.z * 3, 0, Math.PI*2);
        ctx.fill();
      }
      ctx.globalAlpha = 1;
    }
    requestAnimationFrame(draw);
  }
  draw();
})();

/* ---------------------------
   Floating particles
   --------------------------- */
(function createParticles(){
  const container = document.querySelector('.particles');
  if(!container) return;
  function createParticle(){
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + 'vw';
    particle.style.top = Math.random() * 100 + 'vh';
    particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
    particle.style.animationDelay = Math.random() * 5 + 's';
    container.appendChild(particle);
    setTimeout(()=> particle.remove(), 22000);
  }
  for(let i=0;i<15;i++) setTimeout(createParticle, i*120);
  setInterval(createParticle, 1800);
})();

/* ---------------------------
   Game list (data)
   --------------------------- */
const games = [
  {name:"Slope",emoji:"‚ö°",description:"Navigate a neon ball down an endless slope filled with obstacles.",category:"arcade",url:"https://slope-game.github.io/",difficulty:"medium"},
  {name:"Run 3",emoji:"üèÉ",description:"Defy gravity in space tunnels.",category:"arcade",url:"https://run-3.github.io/",difficulty:"easy"},
  {name:"Chrome Dino",emoji:"ü¶ï",description:"Jump cacti and dodge pterodactyls!",category:"arcade",url:"https://chromedino.com/",difficulty:"easy"},
  {name:"Flappy Bird",emoji:"üê¶",description:"Navigate through pipes.",category:"arcade",url:"https://flappybird.io/",difficulty:"hard"},
  {name:"Geometry Dash",emoji:"üî•",description:"Rhythm-based platformer.",category:"arcade",url:"https://scratch.mit.edu/projects/105500895/",difficulty:"hard"},
  {name:"2048",emoji:"üî¢",description:"Combine tiles to reach 2048.",category:"puzzle",url:"https://2048game.com/",difficulty:"medium"},
  {name:"Tetris",emoji:"üß±",description:"Clear lines and achieve the perfect Tetris.",category:"puzzle",url:"https://tetris.com/play-tetris",difficulty:"medium"},
  {name:"Cut the Rope",emoji:"üç≠",description:"Feed candy to Om Nom by cutting ropes.",category:"puzzle",url:"https://cuttherope.ie/",difficulty:"easy"},
  {name:"Wordle",emoji:"üìù",description:"Deduce the 5-letter word using clues.",category:"puzzle",url:"https://wordlegame.org/",difficulty:"medium"},
  {name:"Chess",emoji:"‚ôüÔ∏è",description:"Play against AI or friends.",category:"strategy",url:"https://www.chess.com/play/computer",difficulty:"hard"},
  {name:"Agar.io",emoji:"üéØ",description:"Grow your cell by consuming others.",category:"multiplayer",url:"https://agar.io/",difficulty:"medium"},
  {name:"Pac-Man",emoji:"üëª",description:"Navigate mazes, eat dots, avoid ghosts.",category:"classic",url:"https://www.google.com/doodles/30th-anniversary-of-pac-man",difficulty:"easy"},
  {name:"Minecraft Classic",emoji:"‚õèÔ∏è",description:"Build and explore in the browser version.",category:"creative",url:"https://classic.minecraft.net/",difficulty:"easy"}
];

/* ---------------------------
   UI helpers & launch
   --------------------------- */
function showNotification(message){
  const notification = document.createElement('div');
  notification.className = 'success-notification';
  notification.textContent = message;
  document.body.appendChild(notification);
  setTimeout(()=> notification.classList.add('show'), 100);
  setTimeout(()=>{ notification.classList.remove('show'); setTimeout(()=> notification.remove(),400); }, 2200);
}

function launchGame(url, name){
  // Simple, reliable open in new tab (less likely to be blocked or show raw code)
  try {
    window.open(url, '_blank', 'noopener');
    showNotification(`üöÄ Launching ${name}...`);
  } catch(err){
    // fallback: navigate current window
    window.location.href = url;
  }
}

/* ---------------------------
   populateGames (clean, safe handlers)
   --------------------------- */
function populateGames(gamesToShow = games){
  const container = document.getElementById('allGames');
  if(!container) return;
  container.innerHTML = '';
  if(gamesToShow.length === 0){
    const el = document.createElement('div');
    el.style.gridColumn = '1 / -1';
    el.style.textAlign = 'center';
    el.style.padding = '40px';
    el.style.color = 'var(--muted)';
    el.innerHTML = '<h3>No games found</h3><p>Try adjusting your search or browse a different category.</p>';
    container.appendChild(el);
    return;
  }
  gamesToShow.forEach((game, index) => {
    const card = document.createElement('div');
    card.className = 'game-card';
    card.style.animationDelay = `${index * 0.05}s`;
    const title = document.createElement('h3');
    title.textContent = `${game.emoji} ${game.name}`;
    const desc = document.createElement('p');
    desc.textContent = game.description;
    const meta = document.createElement('div');
    meta.className = 'game-meta';
    const diff = document.createElement('span');
    diff.className = `difficulty ${game.difficulty}`;
    diff.textContent = game.difficulty;
    const play = document.createElement('button');
    play.className = 'play-btn';
    play.textContent = 'Play Now ‚Üí';
    play.addEventListener('click', (ev) => {
      ev.stopPropagation();
      launchGame(game.url, game.name);
    });
    meta.appendChild(diff);
    meta.appendChild(play);
    card.appendChild(title);
    card.appendChild(desc);
    card.appendChild(meta);
    card.addEventListener('click', ()=> launchGame(game.url, game.name));
    container.appendChild(card);
  });
}

/* ---------------------------
   categories & search & keyboard
   --------------------------- */
document.addEventListener('DOMContentLoaded', () => {
  // populate initial
  populateGames();

  // category buttons
  const catButtons = document.querySelectorAll('.category-btn');
  const categoryTitle = document.querySelector('.category-title');
  const names = {
    'all':'All Games','arcade':'Arcade Games','puzzle':'Puzzle Games','strategy':'Strategy Games',
    'multiplayer':'Multiplayer Games','classic':'Classic Games','creative':'Creative Games'
  };
  catButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      catButtons.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const category = btn.dataset.category;
      const filtered = category === 'all' ? games : games.filter(g => g.category === category);
      if(categoryTitle) categoryTitle.textContent = names[category] || 'Games';
      populateGames(filtered);
    });
  });

  // search
  const searchBar = document.getElementById('searchBar');
  let searchTimeout;
  searchBar.addEventListener('input', (e) => {
    clearTimeout(searchTimeout);
    searchTimeout = setTimeout(()=>{
      const q = e.target.value.trim().toLowerCase();
      const filtered = games.filter(g =>
        g.name.toLowerCase().includes(q) ||
        g.description.toLowerCase().includes(q) ||
        g.category.toLowerCase().includes(q)
      );
      if(q){
        catButtons.forEach(b=>b.classList.remove('active'));
        document.querySelector('[data-category="all"]').classList.add('active');
        if(categoryTitle) categoryTitle.textContent = 'Search results';
      } else {
        if(categoryTitle) categoryTitle.textContent = 'All Games';
      }
      populateGames(filtered);
    }, 250);
  });

  // quick exit & portal
  document.getElementById('quickExit').addEventListener('click', emergencyClose);
  document.getElementById('portalBtn').addEventListener('click', ()=> { window.location.href = 'portal.html'; });

  // keyboard shortcuts
  document.addEventListener('keydown', (e) => {
    if(e.ctrlKey && e.key === 'w') emergencyClose();
    if(e.key === 'Escape') document.activeElement.blur();
    if(e.altKey){
      const map = {'1':'all','2':'arcade','3':'puzzle','4':'strategy','5':'multiplayer','6':'classic','7':'creative'};
      if(map[e.key]) document.querySelector(`[data-category="${map[e.key]}"]`).click();
    }
  });
});

/* ---------------------------
   emergency close (creates a safe-looking new page)
   --------------------------- */
function emergencyClose(){
  // Replace current page with a simple blank page that looks innocuous
  document.open();
  document.write(`
    <!doctype html>
    <html>
      <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
        <title>New Tab</title>
        <style>body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial;margin:0;padding:80px;background:#f8fafc;color:#333}a{color:#1a73e8;text-decoration:none;border:1px solid #dadce0;padding:8px 12px;border-radius:6px;margin:6px;display:inline-block}</style>
      </head>
      <body>
        <h1 style="font-weight:300">Welcome to your new tab</h1>
        <p style="color:#666">Start browsing or open a safe site:</p>
        <div>
          <a href="https://www.google.com" target="_blank" rel="noopener">Google</a>
          <a href="https://www.youtube.com" target="_blank" rel="noopener">YouTube</a>
          <a href="https://www.wikipedia.org" target="_blank" rel="noopener">Wikipedia</a>
        </div>
      </body>
    </html>
  `);
  document.close();
}

/* ---------------------------
   performance monitor (simple)
   --------------------------- */
(function(){
  let frameCount = 0; let lastTime = performance.now();
  function tick(){
    frameCount++;
    const now = performance.now();
    if(now - lastTime > 1000){
      const fps = Math.round((frameCount * 1000) / (now - lastTime));
      if(fps < 20){
        const v = document.querySelector('.vignette'); if(v) v.style.animation = 'none';
        document.querySelectorAll('.particle').forEach(p=>p.remove());
      }
      frameCount = 0; lastTime = now;
    }
    requestAnimationFrame(tick);
  }
  tick();
})();
</script>
</body>
</html>
