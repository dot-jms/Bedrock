<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bedrock Games</title>
<link rel="icon" href="favicon.png" type="image/png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg: linear-gradient(135deg, #020208 0%, #0a0a15 50%, #04040a 100%);
    --bg-secondary: #0a0a12;
    --muted: #9aa3a8;
    --muted-hover: #b8c1c6;
    --accent: #8ef6c1;
    --accent-hover: #a8ffdb;
    --accent-glow: rgba(142,246,193,0.4);
    --purple-strong: rgba(150,85,255,0.3);
    --purple-glow: rgba(150,85,255,0.2);
    --purple-subtle: rgba(138,75,230,0.08);
    --tile-purple: rgba(138,75,230,0.16);
    --tile-purple-hover: rgba(138,75,230,0.32);
    --glass-border: rgba(255,255,255,0.12);
    --glass-bg: rgba(255,255,255,0.04);
    --shadow-epic: 0 35px 100px rgba(0,0,0,0.8), 0 15px 60px rgba(150,85,255,0.1);
    --shadow-strong: 0 25px 80px rgba(0,0,0,0.7);
    --shadow-medium: 0 15px 50px rgba(0,0,0,0.4);
    --shadow-soft: 0 8px 25px rgba(0,0,0,0.2);
    --gradient-accent: linear-gradient(135deg, var(--accent), #6ee7b7, var(--accent-hover));
    --gradient-purple: linear-gradient(135deg, #a855f7, #8b5cf6, #7c3aed);
    --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0.02) 100%);
    --gradient-game: linear-gradient(135deg, rgba(236,72,153,0.1), rgba(168,85,247,0.08));
    font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    font-feature-settings: 'liga' 1, 'kern' 1, 'ss01' 1;
  }
  
  html,body{
    height:100%;
    margin:0;
    background: var(--bg);
    background-attachment: fixed;
    color:#f8fafc;
    overflow-x:hidden;
    scroll-behavior: smooth;
    font-weight: 400;
  }
  
  *{
    box-sizing:border-box;
  }
  
  a{color:inherit;text-decoration:none}

  /* Epic background layers */
  canvas#bg{
    position:fixed;
    inset:0;
    z-index:0;
    pointer-events:none;
    display:block;
    filter: brightness(1.2) contrast(1.1);
  }
  
  .vignette{
    position:fixed;
    inset:0;
    z-index:1;
    pointer-events:none;
    background:
      radial-gradient(50% 50% at 20% 20%, rgba(150,85,255,0.25), transparent 30%),
      radial-gradient(60% 60% at 80% 80%, rgba(122,58,210,0.20), transparent 35%),
      radial-gradient(40% 40% at 50% 10%, rgba(142,246,193,0.12), transparent 25%),
      radial-gradient(35% 35% at 10% 80%, rgba(236,72,153,0.08), transparent 20%),
      linear-gradient(180deg, rgba(8,6,14,0.08), rgba(2,2,6,0.15));
    mix-blend-mode: screen;
    animation: vignette-dance 12s ease-in-out infinite;
  }

  @keyframes vignette-dance {
    0%, 100% { opacity: 1; transform: scale(1); }
    33% { opacity: 0.9; transform: scale(1.02); }
    66% { opacity: 0.85; transform: scale(0.98); }
  }

  /* Floating particles */
  .particles {
    position: fixed;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    overflow: hidden;
  }

  .particle {
    position: absolute;
    width: 2px;
    height: 2px;
    background: rgba(142,246,193,0.6);
    border-radius: 50%;
    animation: float 15s infinite linear;
  }

  @keyframes float {
    0% { transform: translateY(100vh) translateX(0) scale(0); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(-10vh) translateX(100px) scale(1); opacity: 0; }
  }

  /* Epic portal card */
  .wrap{
    position:relative;
    z-index:2;
    min-height:100vh;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding:32px;
    animation: grand-entrance 1.2s cubic-bezier(0.23, 1, 0.320, 1);
  }

  @keyframes grand-entrance {
    0% { opacity: 0; transform: translateY(40px) scale(0.95); filter: blur(10px); }
    50% { opacity: 0.8; transform: translateY(10px) scale(0.98); filter: blur(2px); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
  }
  
  .card{
    width:100%;
    max-width:1400px;
    padding:28px;
    border-radius:24px;
    background: var(--gradient-glass);
    border:1px solid var(--glass-border);
    box-shadow: var(--shadow-epic);
    position:relative;
    overflow:visible;
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .card:hover {
    transform: translateY(-2px);
    box-shadow: 
      0 45px 120px rgba(0,0,0,0.9), 
      0 25px 80px rgba(150,85,255,0.15),
      0 0 0 1px rgba(255,255,255,0.1) inset;
  }
  
  .card::before{
    content:"";
    position:absolute;
    inset:-15px;
    border-radius:28px;
    z-index:-1;
    background: linear-gradient(135deg, var(--purple-strong), var(--purple-glow), rgba(142,246,193,0.1));
    filter: blur(25px);
    pointer-events:none;
    animation: glow-breathe 6s ease-in-out infinite;
  }

  @keyframes glow-breathe {
    0%, 100% { opacity: 0.8; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.05); }
  }

  .card::after {
    content: "";
    position: absolute;
    inset: -2px;
    border-radius: 26px;
    z-index: -1;
    background: linear-gradient(45deg, transparent, rgba(142,246,193,0.1), transparent, rgba(150,85,255,0.1), transparent);
    animation: border-glow 8s linear infinite;
  }

  @keyframes border-glow {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Premium header */
  .hdr{
    display:flex;
    align-items:center;
    gap:20px;
    margin-bottom:24px;
    padding-bottom:20px;
    border-bottom:1px solid rgba(255,255,255,0.08);
    position: relative;
  }

  .hdr::after {
    content: "";
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 120px;
    height: 2px;
    background: var(--gradient-accent);
    border-radius: 2px;
    animation: accent-slide 3s ease-in-out infinite;
  }

  @keyframes accent-slide {
    0%, 100% { width: 120px; opacity: 1; }
    50% { width: 240px; opacity: 0.7; }
  }
  
  .logo{
    width:68px;
    height:68px;
    border-radius:16px;
    background: linear-gradient(135deg,#1e1e2e,#16161d);
    display:grid;
    place-items:center;
    color:var(--accent);
    font-weight:800;
    box-shadow: var(--shadow-medium);
    border:1px solid rgba(255,255,255,0.12);
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .logo::before {
    content: "";
    position: absolute;
    inset: -50%;
    background: conic-gradient(from 0deg, transparent, var(--accent-glow), transparent, var(--purple-glow), transparent);
    animation: logo-spin 6s linear infinite;
    z-index: -1;
  }

  @keyframes logo-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  .logo:hover {
    transform: scale(1.05) rotate(5deg);
    box-shadow: 
      0 20px 60px rgba(142,246,193,0.3),
      0 0 30px rgba(142,246,193,0.2) inset;
  }
  
  .logo img{
    width:54px;
    height:54px;
    border-radius:12px;
    display:block;
    z-index: 1;
    position: relative;
  }
  
  h1{
    margin:0;
    font-size:26px;
    font-weight:900;
    background: linear-gradient(135deg, #ffffff 0%, var(--accent) 50%, #a855f7 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.5px;
    text-shadow: 0 0 30px rgba(142,246,193,0.3);
    animation: text-glow 4s ease-in-out infinite;
  }

  @keyframes text-glow {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.2); }
  }
  
  .muted{
    color:var(--muted);
    font-size:15px;
    font-weight:500;
    opacity: 0.9;
  }

  /* Stealth mode controls */
  .controls {
    margin-left: auto;
    display: flex;
    gap: 12px;
    align-items: center;
  }

  .stealth-btn {
    padding: 10px 16px;
    border-radius: 12px;
    border: 1px solid rgba(255,100,100,0.3);
    background: linear-gradient(135deg, rgba(255,100,100,0.15), rgba(220,38,38,0.1));
    color: #fca5a5;
    font-weight: 700;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }

  .stealth-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s ease;
  }

  .stealth-btn:hover::before {
    left: 100%;
  }

  .stealth-btn:hover {
    background: linear-gradient(135deg, rgba(255,100,100,0.25), rgba(220,38,38,0.2));
    border-color: rgba(255,100,100,0.5);
    color: #fecaca;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(239,68,68,0.2);
  }

  .back-btn {
    border-color: rgba(100,100,255,0.3);
    background: linear-gradient(135deg, rgba(100,100,255,0.15), rgba(67,56,202,0.1));
    color: #c7d2fe;
  }

  .back-btn:hover {
    background: linear-gradient(135deg, rgba(100,100,255,0.25), rgba(67,56,202,0.2));
    border-color: rgba(100,100,255,0.5);
    color: #e0e7ff;
    box-shadow: 0 8px 25px rgba(67,56,202,0.2);
  }

  /* Epic games layout */
  .games-content {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 28px;
  }

  .categories {
    padding: 20px;
    border-radius: 20px;
    background: var(--gradient-glass);
    border: 1px solid rgba(255,255,255,0.06);
    backdrop-filter: blur(15px);
    height: fit-content;
    box-shadow: var(--shadow-medium);
    position: relative;
    overflow: hidden;
  }

  .categories::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
    animation: nav-shimmer 4s infinite;
  }

  @keyframes nav-shimmer {
    0% { left: -100%; }
    50% { left: -100%; }
    100% { left: 100%; }
  }

  .category-btn {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 18px;
    border-radius: 14px;
    border: 1px solid transparent;
    background: transparent;
    color: inherit;
    cursor: pointer;
    font-weight: 600;
    font-size: 15px;
    width: 100%;
    margin-bottom: 10px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    text-align: left;
    position: relative;
    overflow: hidden;
  }

  .category-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.6s ease;
  }

  .category-btn:hover::before {
    left: 100%;
  }

  .category-btn:hover {
    background: rgba(255,255,255,0.08);
    border-color: rgba(255,255,255,0.12);
    transform: translateY(-2px) translateX(4px);
    color: var(--muted-hover);
    box-shadow: var(--shadow-soft);
  }

  .category-btn.active {
    background: linear-gradient(135deg, rgba(142,246,193,0.12), rgba(140,90,240,0.12));
    color: var(--accent);
    border-color: rgba(142,246,193,0.3);
    box-shadow:
      0 15px 45px rgba(140,90,240,0.15),
      0 0 20px rgba(142,246,193,0.1) inset;
    transform: translateY(-3px) translateX(6px);
    text-shadow: 0 0 10px rgba(142,246,193,0.5);
  }

  .category-btn.active::after {
    content: "";
    position: absolute;
    right: -2px;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 20px;
    background: var(--gradient-accent);
    border-radius: 2px;
    box-shadow: 0 0 10px var(--accent-glow);
  }

  /* Search bar */
  .search-bar {
    width: 100%;
    padding: 14px 18px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,0.08);
    background: rgba(255,255,255,0.04);
    color: #f8fafc;
    font-size: 15px;
    margin-bottom: 20px;
    transition: all 0.3s ease;
    font-weight: 500;
  }

  .search-bar:focus {
    outline: none;
    border-color: rgba(142,246,193,0.4);
    background: rgba(255,255,255,0.08);
    box-shadow: 0 0 20px rgba(142,246,193,0.1);
  }

  .search-bar::placeholder {
    color: var(--muted);
    font-weight: 500;
  }

  /* Epic games grid */
  .games-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 24px;
  }

  .game-card {
    border-radius: 20px;
    padding: 24px;
    border: 1px solid rgba(255,255,255,0.08);
    min-height: 160px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--gradient-glass);
    backdrop-filter: blur(15px);
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-soft);
  }

  .game-card::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 22px;
    background: linear-gradient(45deg, transparent, rgba(142,246,193,0.1), transparent, rgba(150,85,255,0.1), transparent);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .game-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
    transition: left 0.6s ease;
  }

  .game-card:hover::after {
    left: 100%;
  }

  .game-card:hover::before {
    opacity: 1;
    animation: border-dance 2s linear infinite;
  }

  @keyframes border-dance {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  .game-card:hover {
    background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
    transform: translateY(-12px) scale(1.03);
    box-shadow:
      0 35px 80px rgba(120,60,220,0.2),
      0 0 40px rgba(142,246,193,0.1) inset;
    border-color: rgba(255,255,255,0.15);
  }

  .game-card h3 {
    margin: 0 0 12px 0;
    font-size: 19px;
    color: #f1f5f9;
    font-weight: 800;
    display: flex;
    align-items: center;
    gap: 10px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }

  .game-card p {
    margin: 0 0 20px 0;
    color: var(--muted);
    font-size: 15px;
    line-height: 1.5;
    font-weight: 500;
    flex-grow: 1;
  }

  .game-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    color: var(--muted);
    font-weight: 600;
  }

  .difficulty {
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .difficulty.easy {
    background: rgba(34,197,94,0.15);
    color: #86efac;
    border: 1px solid rgba(34,197,94,0.3);
  }

  .difficulty.medium {
    background: rgba(251,191,36,0.15);
    color: #fde047;
    border: 1px solid rgba(251,191,36,0.3);
  }

  .difficulty.hard {
    background: rgba(239,68,68,0.15);
    color: #fca5a5;
    border: 1px solid rgba(239,68,68,0.3);
  }

  .play-btn {
    padding: 10px 18px;
    border-radius: 10px;
    border: 0;
    background: linear-gradient(135deg, rgba(142,246,193,0.15), rgba(140,90,240,0.1));
    color: var(--accent);
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
    position: relative;
    overflow: hidden;
  }

  .play-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s ease;
  }

  .play-btn:hover::before {
    left: 100%;
  }

  .play-btn:hover {
    background: linear-gradient(135deg, rgba(142,246,193,0.25), rgba(140,90,240,0.2));
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(142,246,193,0.2);
    text-shadow: 0 0 10px rgba(142,246,193,0.5);
  }

  .category-section h2 {
    margin: 0 0 20px 0;
    font-size: 22px;
    font-weight: 800;
    color: var(--accent);
    text-shadow: 0 0 20px rgba(142,246,193,0.3);
  }

  /* Responsive design */
  @media (max-width: 920px) {
    .games-content { grid-template-columns: 1fr; }
    .categories { order: 1; margin-top: 24px; }
    .games-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
    .wrap { padding: 24px; }
    .card { padding: 24px; }
  }

  @media (max-width: 480px) {
    .wrap { padding: 20px; }
    .card { padding: 20px; }
    .controls { flex-direction: column; gap: 10px; }
    .games-grid { grid-template-columns: 1fr; }
  }

  /* Tab content animations */
  .category-section {
    animation: category-materialize 0.6s cubic-bezier(0.23, 1, 0.320, 1);
  }

  @keyframes category-materialize {
    0% { opacity: 0; transform: translateY(20px) scale(0.95); filter: blur(5px); }
    50% { opacity: 0.5; transform: translateY(5px) scale(0.98); filter: blur(1px); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.02);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--accent), var(--purple-glow));
    border-radius: 4px;
    box-shadow: 0 0 10px rgba(142,246,193,0.3);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--accent-hover), var(--purple-strong));
  }

  *:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-radius: 4px;
  }

  /* Success notification */
  .success-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    background: linear-gradient(135deg, var(--accent), var(--accent-hover));
    color: #0a0a0a;
    padding: 16px 24px;
    border-radius: 16px;
    font-weight: 700;
    font-size: 15px;
    box-shadow: var(--shadow-medium);
    transform: translateX(100%);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
  }

  .success-notification.show {
    transform: translateX(0);
  }
</style>
</head>
<body>
  <canvas id="bg" aria-hidden="true"></canvas>
  <div class="vignette" aria-hidden="true"></div>
  
  <!-- Floating particles -->
  <div class="particles" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card">
      <div class="hdr">
        <div class="logo">
          <img src="favicon.png" alt="Bedrock logo">
        </div>
        <div>
          <h1>Bedrock Games</h1>
          <div class="muted">Your stealth gaming sanctuary</div>
        </div>

        <div class="controls">
          <button class="stealth-btn" onclick="emergencyClose()" title="Emergency stealth exit">⚡ Quick Exit</button>
          <button class="stealth-btn back-btn" onclick="window.close() || (window.location.href='portal.html')" title="Return to portal">← Portal</button>
        </div>
      </div>

      <div class="games-content">
        <div class="categories">
          <input type="text" class="search-bar" placeholder="Search your arsenal..." id="searchBar">
          
          <button class="category-btn active" data-category="all">🎮 All Games</button>
          <button class="category-btn" data-category="arcade">👾 Arcade</button>
          <button class="category-btn" data-category="puzzle">🧩 Puzzle</button>
          <button class="category-btn" data-category="strategy">🎯 Strategy</button>
          <button class="category-btn" data-category="multiplayer">👥 Multiplayer</button>
          <button class="category-btn" data-category="classic">🕹️ Classic</button>
          <button class="category-btn" data-category="creative">🎨 Creative</button>
        </div>

        <div id="gamesContainer">
          <div class="category-section" data-category="all">
            <div class="games-grid" id="allGames">
              <!-- Games will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ---------------------------
       EPIC STARFIELD WITH NEBULA
       --------------------------- */
    (function(){
      const canvas = document.getElementById('bg');
      const ctx = canvas.getContext('2d');
      let w = canvas.width = innerWidth;
      let h = canvas.height = innerHeight;

      const STAR_COUNT = Math.floor((w*h)/2400);
      const stars = [];
      const nebula = [];
      
      function rand(min,max){ return Math.random()*(max-min)+min }
      
      // Create diverse star field
      for(let i=0;i<STAR_COUNT;i++){
        stars.push({
          x: Math.random()*w,
          y: Math.random()*h,
          z: rand(0.3,2.0),
          r: rand(0.8,5.0),
          vx: rand(-0.05,0.05),
          vy: rand(-0.1,0.1),
          t: Math.random()*20,
          color: Math.random() > 0.88 ? 'rgba(142,246,193,0.9)' : 
                 Math.random() > 0.94 ? 'rgba(168,85,247,0.8)' : 'white',
          twinkleSpeed: rand(0.5, 2.0)
        });
      }

      // Create nebula clouds
      for(let i=0;i<8;i++){
        nebula.push({
          x: Math.random()*w,
          y: Math.random()*h,
          r: rand(80,200),
          vx: rand(-0.02,0.02),
          vy: rand(-0.02,0.02),
          opacity: rand(0.02,0.08),
          color: Math.random() > 0.5 ? 'rgba(142,246,193,' : 'rgba(168,85,247,'
        });
      }

      function resize(){
        w = canvas.width = innerWidth;
        h = canvas.height = innerHeight;
      }
      addEventListener('resize', resize);

      function draw(){
        ctx.clearRect(0,0,w,h);
        
        // Enhanced background with depth
        const g1 = ctx.createRadialGradient(w*0.3,h*0.3,0,w*0.3,h*0.3,Math.max(w,h)*0.6);
        g1.addColorStop(0,'rgba(10,8,20,0.15)');
        g1.addColorStop(0.5,'rgba(6,4,14,0.25)');
        g1.addColorStop(1,'rgba(2,2,8,0.35)');
        ctx.fillStyle = g1;
        ctx.fillRect(0,0,w,h);

        const g2 = ctx.createRadialGradient(w*0.7,h*0.7,0,w*0.7,h*0.7,Math.max(w,h)*0.5);
        g2.addColorStop(0,'rgba(20,8,25,0.08)');
        g2.addColorStop(1,'transparent');
        ctx.fillStyle = g2;
        ctx.fillRect(0,0,w,h);

        const t = Date.now()/3200;
        
        // Draw nebula
        for(const n of nebula){
          n.x += n.vx;
          n.y += n.vy;
          
          if(n.x < -n.r) n.x = w + n.r;
          if(n.x > w + n.r) n.x = -n.r;
          if(n.y < -n.r) n.y = h + n.r;
          if(n.y > h + n.r) n.y = -n.r;
          
          const pulse = Math.abs(Math.sin(t * 0.3 + n.x * 0.001));
          ctx.beginPath();
          ctx.globalAlpha = n.opacity * pulse;
          const g = ctx.createRadialGradient(n.x,n.y,0,n.x,n.y,n.r);
          g.addColorStop(0, n.color + (n.opacity * 2) + ')');
          g.addColorStop(1, 'transparent');
          ctx.fillStyle = g;
          ctx.arc(n.x, n.y, n.r, 0, Math.PI*2);
          ctx.fill();
        }
        
        // Draw enhanced stars
        for(const s of stars){
          s.x += s.vx * (s.z*2);
          s.y += s.vy * (s.z*2);
          
          const twinkle = Math.abs(Math.sin(t * s.twinkleSpeed + s.t)) * 
                         Math.abs(Math.cos(t * s.twinkleSpeed * 0.7 + s.t * 0.5));
          
          // Wrap around edges
          if(s.x<0) s.x = w;
          if(s.x>w) s.x = 0;
          if(s.y<0) s.y = h;
          if(s.y>h) s.y = 0;
          
          // Main star
          ctx.beginPath();
          ctx.globalAlpha = 0.7 + 0.3 * s.z * (0.3 + twinkle*0.7);
          ctx.fillStyle = s.color;
          ctx.arc(s.x, s.y, s.r * s.z, 0, Math.PI*2);
          ctx.fill();
          
          // Glow for bigger/special stars
          if(s.r > 3 || s.color !== 'white'){
            ctx.beginPath();
            ctx.globalAlpha = 0.15 * s.z * twinkle;
            ctx.arc(s.x, s.y, s.r * s.z * 3, 0, Math.PI*2);
            ctx.fill();
          }
          
          // Sparkle effect for colored stars
          if(s.color !== 'white' && twinkle > 0.8){
            ctx.beginPath();
            ctx.globalAlpha = 0.4 * twinkle;
            ctx.fillStyle = s.color;
            ctx.arc(s.x + rand(-2,2), s.y + rand(-2,2), 1, 0, Math.PI*2);
            ctx.fill();
          }
          
          ctx.globalAlpha = 1;
        }
        requestAnimationFrame(draw);
      }
      draw();
    })();

    /* ---------------------------
       FLOATING PARTICLES
       --------------------------- */
    (function createParticles(){
      const container = document.querySelector('.particles');
      
      function createParticle(){
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + 'vw';
        particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
        particle.style.animationDelay = Math.random() * 5 + 's';
        container.appendChild(particle);
        
        setTimeout(() => {
          particle.remove();
        }, 20000);
      }
      
      // Create initial particles
      for(let i = 0; i < 15; i++){
        setTimeout(createParticle, i * 800);
      }
      
      // Continue creating particles
      setInterval(createParticle, 1800);
    })();

    // Game database with enhanced descriptions
    const games = [
      // Arcade Games
      {
        name: "Slope",
        emoji: "⚡",
        description: "Navigate a neon ball down an endless slope filled with obstacles. Test your reflexes in this addictive 3D challenge.",
        category: "arcade",
        url: "https://slope-game.github.io/",
        difficulty: "medium"
      },
      {
        name: "Run 3",
        emoji: "🏃",
        description: "Defy gravity in space tunnels. Run, jump, and navigate through an endless cosmic adventure with unique mechanics.",
        category: "arcade", 
        url: "https://run-3.github.io/",
        difficulty: "easy"
      },
      {
        name: "Chrome Dino",
        emoji: "🦕",
        description: "The beloved offline Chrome dinosaur game, now always accessible. Jump cacti and dodge pterodactyls!",
        category: "arcade",
        url: "https://chromedino.com/",
        difficulty: "easy"
      },
      {
        name: "Flappy Bird",
        emoji: "🐦",
        description: "The infamous rage-inducing classic. Navigate through pipes with simple taps in this deceptively difficult game.",
        category: "arcade",
        url: "https://flappybird.io/",
        difficulty: "hard"
      },
      {
        name: "Geometry Dash",
        emoji: "🔥",
        description: "Rhythm-based platformer with epic music. Jump and fly through danger in this geometry-based world.",
        category: "arcade",
        url: "https://scratch.mit.edu/projects/105500895/",
        difficulty: "hard"
      },

      // Puzzle Games  
      {
        name: "2048",
        emoji: "🔢",
        description: "Combine numbered tiles to reach 2048. Simple concept, addictive gameplay, mathematical satisfaction guaranteed.",
        category: "puzzle",
        url: "https://2048game.com/",
        difficulty: "medium"
      },
      {
        name: "Tetris",
        emoji: "🧱",
        description: "The legendary block-stacking puzzle that defined a generation. Clear lines and achieve the perfect Tetris.",
        category: "puzzle",
        url: "https://tetris.com/play-tetris",
        difficulty: "medium"
      },
      {
        name: "Cut the Rope",
        emoji: "🍭",
        description: "Feed candy to Om Nom by cutting ropes strategically. Physics-based puzzles with adorable characters.",
        category: "puzzle", 
        url: "https://cuttherope.ie/",
        difficulty: "easy"
      },
      {
        name: "Wordle",
        emoji: "📝",
        description: "The viral word-guessing phenomenon. Deduce the 5-letter word using clues and logical thinking.",
        category: "puzzle",
        url: "https://wordlegame.org/",
        difficulty: "medium"
      },

      // Strategy Games
      {
        name: "Chess",
        emoji: "♟️",
        description: "The ultimate strategy game. Play against AI or challenge friends in this timeless battle of minds.",
        category: "strategy",
        url: "https://www.chess.com/play/computer",
        difficulty: "hard"
      },
      {
        name: "Checkers",
        emoji: "🔴",
        description: "Classic board game of tactical movement. Capture opponent pieces and crown your kings.",
        category: "strategy",
        url: "https://www.gamesgames.com/game/checkers-classic",
        difficulty: "medium"
      },
      {
        name: "Tower Defense",
        emoji: "🗼",
        description: "Build towers and defend your base against waves of enemies. Strategic placement is key to victory.",
        category: "strategy",
        url: "https://www.crazygames.com/game/bloons-td",
        difficulty: "medium"
      },

      // Multiplayer Games
      {
        name: "Agar.io",
        emoji: "🎯",
        description: "Grow your cell by consuming others in this competitive multiplayer arena. Survive and dominate!",
        category: "multiplayer",
        url: "https://agar.io/",
        difficulty: "medium"
      },
      {
        name: "Slither.io",
        emoji: "🐍",
        description: "Become the longest snake in the arena. Eat orbs, trap enemies, and avoid collision in this addictive .io game.",
        category: "multiplayer",
        url: "https://slither.io/",
        difficulty: "easy"
      },
      {
        name: "Shell Shockers",
        emoji: "🥚",
        description: "Multiplayer egg-based shooter with various game modes. Crack your enemies in this hilarious FPS!",
        category: "multiplayer",
        url: "https://shellshock.io/",
        difficulty: "medium"
      },
      {
        name: "Krunker",
        emoji: "🔫",
        description: "Fast-paced browser-based FPS with pixel graphics. Multiple game modes and weapon classes available.",
        category: "multiplayer",
        url: "https://krunker.io/",
        difficulty: "medium"
      },

      // Classic Games
      {
        name: "Pac-Man",
        emoji: "👻",
        description: "The arcade legend that started it all. Navigate mazes, eat dots, and avoid ghosts in this timeless classic.",
        category: "classic",
        url: "https://www.google.com/doodles/30th-anniversary-of-pac-man",
        difficulty: "easy"
      },
      {
        name: "Snake",
        emoji: "🐍",
        description: "The Nokia phone classic reimagined. Grow your snake, avoid walls, and chase that high score.",
        category: "classic",
        url: "https://playsnake.org/",
        difficulty: "easy"
      },
      {
        name: "Asteroids",
        emoji: "🚀",
        description: "Destroy asteroids and UFOs in the void of space. Classic vector graphics and smooth gameplay.",
        category: "classic",
        url: "https://freeasteroids.org/",
        difficulty: "medium"
      },
      {
        name: "Pong",
        emoji: "🏓",
        description: "The game that started the video game industry. Simple paddle-based gameplay, endless fun.",
        category: "classic",
        url: "https://pong-2.com/",
        difficulty: "easy"
      },

      // Creative Games
      {
        name: "Minecraft Classic",
        emoji: "⛏️", 
        description: "Build and explore in the browser version of the world's most popular sandbox game. Unlimited creativity awaits.",
        category: "creative",
        url: "https://classic.minecraft.net/",
        difficulty: "easy"
      },
      {
        name: "Draw.io",
        emoji: "✏️",
        description: "Create professional diagrams, flowcharts, and drawings online. Perfect for projects and brainstorming.",
        category: "creative",
        url: "https://app.diagrams.net/",
        difficulty: "easy"
      },
      {
        name: "Little Alchemy",
        emoji: "🧪",
        description: "Combine elements to create new items and discover the secrets of creation. Start with air, earth, fire, and water.",
        category: "creative",
        url: "https://littlealchemy.com/",
        difficulty: "easy"
      }
    ];

    /* ---------------------------
       EMERGENCY STEALTH FUNCTIONS
       --------------------------- */
    function emergencyClose() {
      // Create convincing about:blank page
      const newWindow = window.open('about:blank', '_self');
      newWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>New Tab</title>
          <style>
            body { 
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
              background: #f8f9fa; color: #333; text-align: center; padding: 100px 20px;
              margin: 0; line-height: 1.6;
            }
            .container { max-width: 600px; margin: 0 auto; }
            h1 { color: #555; font-weight: 300; margin-bottom: 20px; }
            p { color: #666; font-size: 16px; margin-bottom: 30px; }
            .links { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .link { 
              color: #1a73e8; text-decoration: none; padding: 8px 16px;
              border: 1px solid #dadce0; border-radius: 4px; transition: all 0.2s;
            }
            .link:hover { background: #f8f9fa; border-color: #1a73e8; }
          </style>
        </head>
        <body>
          <div class="container">
            <h1>Welcome to your new tab</h1>
            <p>Start browsing or check out these popular sites:</p>
            <div class="links">
              <a href="#" class="link">Google</a>
              <a href="#" class="link">YouTube</a>
              <a href="#" class="link">Wikipedia</a>
              <a href="#" class="link">Khan Academy</a>
            </div>
          </div>
        </body>
        </html>
      `);
    }

    // Keyboard shortcut for ultra-quick exit
    document.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.key === 'w') {
        emergencyClose();
      }
      // Secret Konami code for fun
      if (e.key === 'Escape' && e.shiftKey) {
        emergencyClose();
      }
    });

    /* ---------------------------
       EPIC GAME LAUNCHING WITH STEALTH
       --------------------------- */
    function launchGame(url, name) {
      // Visual feedback
      showNotification(`🚀 Launching ${name}...`);
      
      // Open in stealth mode
      const gameWindow = window.open('about:blank', '_blank');
      gameWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>New Tab</title>
          <style>
            body { margin: 0; padding: 0; overflow: hidden; background: #f8f9fa; }
            iframe { width: 100vw; height: 100vh; border: none; }
            .loading { 
              position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
              color: #333; text-align: center; z-index: 10;
            }
            .loading h2 { color: #1a73e8; font-weight: 300; margin-bottom: 10px; }
            .loading p { color: #666; font-size: 14px; }
            .spinner {
              width: 40px; height: 40px; border: 3px solid #f3f3f3;
              border-top: 3px solid #1a73e8; border-radius: 50%;
              animation: spin 1s linear infinite; margin: 20px auto;
            }
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
          </style>
        </head>
        <body>
          <div class="loading" id="loading">
            <h2>Loading content...</h2>
            <div class="spinner"></div>
            <p>Please wait while we prepare your experience</p>
          </div>
          <iframe src="${url}" onload="document.getElementById('loading').style.display='none'"></iframe>
          
          <script>
            // Emergency exit shortcut
            document.addEventListener('keydown', function(e) {
              if (e.ctrlKey && e.key === 'w') {
                window.close();
              }
            });
            
            // Hide loading after timeout
            setTimeout(function() {
              document.getElementById('loading').style.display = 'none';
            }, 5000);
          </script>
        </body>
        </html>
      `);
    }

    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'success-notification';
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => notification.classList.add('show'), 100);
      
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 400);
      }, 2500);
    }

    /* ---------------------------
       ENHANCED GAME POPULATION
       --------------------------- */
    function populateGames(gamesToShow = games) {
      const container = document.getElementById('allGames');
      container.innerHTML = '';

      if (gamesToShow.length === 0) {
        container.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--muted);">
            <h3>No games found</h3>
            <p>Try adjusting your search or browse a different category.</p>
          </div>
        `;
        return;
      }

      gamesToShow.forEach((game, index) => {
        const gameCard = document.createElement('div');
        gameCard.className = 'game-card';
        gameCard.style.animationDelay = `${index * 0.1}s`;
        
        gameCard.innerHTML = `
          <h3>${game.emoji} ${game.name}</h3>
          <p>${game.description}</p>
          <div class="game-meta">
            <span class="difficulty ${game.difficulty}">${game.difficulty}</span>
            <button class="play-btn" onclick="launchGame('${game.url}', '${game.name}'); event.stopPropagation();">
              Play Now →
            </button>
          </div>
        `;
        
        // Add click to launch
        gameCard.addEventListener('click', () => {
          launchGame(game.url, game.name);
        });
        
        container.appendChild(gameCard);
      });
    }

    /* ---------------------------
       ENHANCED CATEGORY SYSTEM
       --------------------------- */
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        // Update active states
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Filter games
        const category = btn.dataset.category;
        const filteredGames = category === 'all' ? games : games.filter(g => g.category === category);
        
        // Update header
        const header = document.querySelector('.category-section h2');
        if (header) {
          const categoryNames = {
            'all': 'All Games',
            'arcade': 'Arcade Games',
            'puzzle': 'Puzzle Games', 
            'strategy': 'Strategy Games',
            'multiplayer': 'Multiplayer Games',
            'classic': 'Classic Games',
            'creative': 'Creative Games'
          };
          header.textContent = categoryNames[category] || 'Games';
        }
        
        populateGames(filteredGames);
      });
    });

    /* ---------------------------
       ENHANCED SEARCH
       --------------------------- */
    let searchTimeout;
    document.getElementById('searchBar').addEventListener('input', (e) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        const query = e.target.value.toLowerCase();
        const filteredGames = games.filter(game => 
          game.name.toLowerCase().includes(query) || 
          game.description.toLowerCase().includes(query) ||
          game.category.toLowerCase().includes(query)
        );
        
        // Update active category to "all" when searching
        if (query) {
          document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
          document.querySelector('[data-category="all"]').classList.add('active');
        }
        
        populateGames(filteredGames);
      }, 300);
    });

    /* ---------------------------
       ADVANCED INTERACTIONS
       --------------------------- */
    
    // Mouse tracking for subtle parallax
    document.addEventListener('mousemove', (e) => {
      const x = e.clientX / window.innerWidth;
      const y = e.clientY / window.innerHeight;
      
      document.querySelector('.vignette').style.transform = 
        `translate(${x * 8}px, ${y * 8}px)`;
        
      document.querySelector('.card').style.transform = 
        `perspective(1200px) rotateX(${(y - 0.5) * 1.5}deg) rotateY(${(x - 0.5) * 1.5}deg)`;
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.activeElement.blur();
      }
      
      // Quick category switching
      if (e.altKey) {
        const keys = ['1','2','3','4','5','6','7'];
        const categories = ['all','arcade','puzzle','strategy','multiplayer','classic','creative'];
        const index = keys.indexOf(e.key);
        if (index !== -1) {
          document.querySelector(`[data-category="${categories[index]}"]`).click();
          e.preventDefault();
        }
      }
    });

    // Performance monitoring
    let frameCount = 0;
    let lastTime = performance.now();
    
    function checkPerformance() {
      frameCount++;
      const now = performance.now();
      
      if (now - lastTime > 1000) {
        const fps = Math.round((frameCount * 1000) / (now - lastTime));
        
        if (fps < 25) {
          // Reduce effects for performance
          document.querySelector('.vignette').style.animation = 'none';
          document.querySelectorAll('.particle').forEach(p => p.remove());
        }
        
        frameCount = 0;
        lastTime = now;
      }
      
      requestAnimationFrame(checkPerformance);
    }
    
    checkPerformance();

    /* ---------------------------
       INITIALIZE EVERYTHING
       --------------------------- */
    
    // Populate games on load
    populateGames();
    
    // Smooth entry animation
    setTimeout(() => {
      document.body.style.opacity = '1';
    }, 100);

    // Welcome message
    setTimeout(() => {
      showNotification('🎮 Welcome to your gaming sanctuary!');
    }, 1500);
  </script>
</body>
</html>
