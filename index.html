<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>BEDROCK Access Portal</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap">
<style>
  html,body{margin:0;padding:0;height:100%;font-family:'Inter',sans-serif;overflow:hidden;background:#020208;}
  #bg{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;}
  #logPanel{position:fixed;bottom:0;right:0;width:300px;max-height:40%;background:rgba(0,0,0,0.7);color:#fff;overflow-y:auto;font-size:12px;padding:8px;display:none;z-index:9999;}
  .logLine.ok{color:#0f0;}
  .logLine.err{color:#f55;}
  .logLine.warn{color:#ff0;}
  #fallbackBar{position:fixed;top:0;width:100%;background:#222;color:#fff;padding:12px;text-align:center;display:none;z-index:999;}
  #fallbackBar button{padding:8px 16px;border:none;border-radius:6px;background:#8ef6c1;color:#000;cursor:pointer;font-weight:700;}
  .card{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(10,10,20,0.7);padding:48px;border-radius:32px;text-align:center;z-index:1;backdrop-filter:blur(6px);}
  .card h1{font-size:48px;font-weight:900;margin-bottom:24px;background:linear-gradient(135deg,#fff,#8ef6c1,#a855f7);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:2px;}
  .card input{padding:12px 20px;font-size:16px;border-radius:12px;border:none;margin-bottom:16px;width:240px;}
  .card button{padding:14px 32px;border-radius:20px;border:none;background:linear-gradient(135deg,#8ef6c1,#a8ffdb);font-weight:900;font-size:16px;cursor:pointer;transition:0.3s;box-shadow:0 15px 40px rgba(142,246,193,0.4);}
  .card button:hover{transform:scale(1.1);}
  #loading{display:none;position:absolute;inset:0;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:2;color:#fff;font-weight:900;font-size:22px;}
  #successMsg,#errorMsg{display:none;margin-top:12px;font-weight:700;}
  #successMsg.show,#errorMsg.show{display:block;}
</style>
</head>
<body>
<canvas id="bg"></canvas>

<div id="fallbackBar">Popup blocked! <button id="openHereBtn">Open Portal Here</button></div>

<div class="card">
  <h1>BEDROCK ACCESS</h1>
  <input type="text" id="keyInput" placeholder="Enter Key">
  <br>
  <button id="accessBtn">ACCESS</button>
  <div id="loading">LOADING...</div>
  <div id="successMsg">Access Granted!</div>
  <div id="errorMsg">Invalid Key!</div>
</div>

<div id="logPanel"></div>

<script>
(function() {
  'use strict';
  
  const VALID_KEYS = ["BEDROCK2025","TEST123","DEMO42"];
  const DEBUG_KEY = 'd';
  const elements = {
    logPanel: document.getElementById('logPanel'),
    fallbackBar: document.getElementById('fallbackBar'),
    openHereBtn: document.getElementById('openHereBtn'),
    keyInput: document.getElementById('keyInput'),
    accessBtn: document.getElementById('accessBtn'),
    loading: document.getElementById('loading'),
    successMsg: document.getElementById('successMsg'),
    errorMsg: document.getElementById('errorMsg')
  };

  function log(message,type=''){const l=document.createElement('div');l.className='logLine'+(type?' '+type:'');l.textContent=new Date().toLocaleTimeString()+' â€” '+message;elements.logPanel.appendChild(l);elements.logPanel.scrollTop=elements.logPanel.scrollHeight;if(elements.logPanel.children.length>100)elements.logPanel.removeChild(elements.logPanel.firstChild);}
  
  function getCookie(name){const match=document.cookie.match(new RegExp('(^| )'+name+'=([^;]+)'));return match?decodeURIComponent(match[2]):null;}
  function setCookie(name,value,days=365){const expires=new Date(Date.now()+days*24*60*60*1000).toUTCString();document.cookie=name+'='+encodeURIComponent(value)+';path=/;expires='+expires+';SameSite=Strict';}

  function showLoading(show){elements.loading.style.display=show?'flex':'none';elements.accessBtn.disabled=show;if(show)hideMessages();}
  function showSuccess(){hideMessages();elements.successMsg.classList.add('show');log('Access granted successfully','ok');}
  function showError(){hideMessages();elements.errorMsg.classList.add('show');log('Access denied - invalid key','err');setTimeout(()=>{elements.keyInput.value='';elements.keyInput.focus();},500);}
  function hideMessages(){elements.successMsg.classList.remove('show');elements.errorMsg.classList.remove('show');}
  function showFallback(){elements.fallbackBar.style.display='block';log('Popup blocked - showing fallback','warn');}

  function launchPortal(){
    showSuccess();
    setCookie('bedrock_access','granted');
    setTimeout(()=>{
      try{
        const win=window.open('about:blank','_blank','noopener,noreferrer');
        if(!win||win.closed){showFallback();return;}
        const launchHTML=`
          <!DOCTYPE html><html><head><title>BEDROCK</title><meta charset="utf-8">
          <style>*{margin:0;padding:0;box-sizing:border-box;}body{height:100vh;background:linear-gradient(135deg,#020208,#0a0a15,#04040a);color:#f8fafc;font-family:'Inter',sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden;}canvas{position:fixed;inset:0;z-index:0;}.launch-container{position:relative;z-index:2;text-align:center;animation:fadeIn 2.5s cubic-bezier(0.23,1,0.32,1);}@keyframes fadeIn{0%{opacity:0;transform:scale(0.8) translateY(40px);}100%{opacity:1;transform:scale(1) translateY(0);}}.launch-title{font-size:56px;font-weight:900;margin-bottom:32px;background:linear-gradient(135deg,#ffffff,#8ef6c1,#a855f7);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:titleGlow 5s ease-in-out infinite;letter-spacing:3px;}@keyframes titleGlow{0%,100%{filter:brightness(1) drop-shadow(0 0 20px rgba(142,246,193,0.3));}50%{filter:brightness(1.5) drop-shadow(0 0 40px rgba(142,246,193,0.5));}}.launch-btn{padding:28px 56px;border-radius:28px;border:0;background:linear-gradient(135deg,#8ef6c1,#a8ffdb);color:#0a0a0a;font-weight:900;font-size:22px;cursor:pointer;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);box-shadow:0 25px 80px rgba(142,246,193,0.4);animation:breathe 4s ease-in-out infinite;letter-spacing:1px;position:relative;overflow:hidden;}@keyframes breathe{0%,100%{transform:scale(1);}50%{transform:scale(1.05);}}.launch-btn::before{content:'';position:absolute;inset:-3px;background:conic-gradient(from 0deg,transparent,rgba(142,246,193,0.5),transparent);border-radius:31px;z-index:-1;animation:rotate 3s linear infinite;}@keyframes rotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}.launch-btn:hover{transform:scale(1.2) rotateX(10deg);box-shadow:0 35px 100px rgba(142,246,193,0.6);animation:none;}.launch-btn:active{transform:scale(1.15);}</style>
          </head><body>
          <canvas id="nebula"></canvas>
          <div class="launch-container"><h1 class="launch-title">BEDROCK</h1>
          <button class="launch-btn" onclick="window.location.href='portal.html'">LAUNCH BEDROCK</button></div>
          <script>(function(){const c=document.getElementById('nebula');const ctx=c.getContext('2d');let w=c.width=innerWidth,h=c.height=innerHeight;const particles=[];for(let i=0;i<150;i++){particles.push({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-0.5)*0.8,vy:(Math.random()-0.5)*0.8,size:Math.random()*2+.5,hue:Math.random()>0.7?180+Math.random()*40:280+Math.random()*40,alpha:Math.random()*.8+.2})}function animate(){ctx.fillStyle='rgba(2,2,8,0.03)';ctx.fillRect(0,0,w,h);particles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>w)p.vx*=-1;if(p.y<0||p.y>h)p.vy*=-1;ctx.beginPath();ctx.fillStyle='hsla('+p.hue+',80%,70%,'+p.alpha+')';ctx.arc(p.x,p.y,p.size,0,Math.PI*2);ctx.fill();});requestAnimationFrame(animate);}animate();window.addEventListener('resize',()=>{w=c.width=innerWidth;h=c.height=innerHeight;})();})();</script>
          </body></html>`;
        win.document.open();
        win.document.write(launchHTML);
        win.document.close();
        log('Portal launched successfully in new window','ok');
        setTimeout(()=>window.close(),2000);
      }catch(e){log('Error launching portal: '+e.message,'err');showFallback();}
    },1500);
  }

  function validateKey(){
    const k=elements.keyInput.value.trim().toUpperCase();
    if(!k){elements.keyInput.focus();return;}
    log('Attempting authentication with key: '+k.replace(/./g,'*'));
    showLoading(true);
    setTimeout(()=>{showLoading(false);if(VALID_KEYS.includes(k)){log('Key validated successfully','ok');launchPortal();}else{log('Invalid key','err');showError();}},1200);
  }

  function checkExistingAccess(){if(getCookie('bedrock_access')==='granted'){log('Existing access found, auto-launching','ok');launchPortal();return true;}return false;}

  elements.accessBtn.addEventListener('click',validateKey);
  elements.keyInput.addEventListener('keypress',e=>{if(e.key==='Enter')validateKey();});
  elements.openHereBtn.addEventListener('click',()=>{log('Fallback activated - opening portal in current tab','warn');setCookie('bedrock_access','granted');window.location.href='portal.html';});
  document.addEventListener('keydown',e=>{if(e.key===DEBUG_KEY||e.key===DEBUG_KEY.toUpperCase()){const v=elements.logPanel.style.display!=='none';elements.logPanel.style.display=v?'none':'block';log(v?'Debug panel hidden':'Debug panel shown');}});

  (function starfield(){const c=document.getElementById('bg');const ctx=c.getContext('2d');let W,H;function resize(){W=c.width=window.innerWidth;H=c.height=window.innerHeight;}resize();window.addEventListener('resize',resize);const stars=[];const N=Math.floor((window.innerWidth*window.innerHeight)/2500);for(let i=0;i<N;i++){stars.push({x:Math.random()*W,y:Math.random()*H,z:Math.random()*.8+.2,r:Math.random()*2+.5,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,tw:Math.random()*Math.PI*2,s:Math.random()*.02+.005,c:Math.random()>0.9?(Math.random()>.5?'rgba(142,246,193,':'rgba(168,85,247,'):'rgba(255,255,255,'})}function draw(){ctx.clearRect(0,0,W,H);const g=ctx.createRadialGradient(W/2,H/2,0,W/2,H/2,Math.max(W,H));g.addColorStop(0,'rgba(10,8,20,0.1)');g.addColorStop(1,'rgba(2,2,8,0.2)');ctx.fillStyle=g;ctx.fillRect(0,0,W,H);for(const s of stars){s.x+=s.vx*s.z;s.y+=s.vy*s.z;if(s.x>W)s.x=0;if(s.x<0)s.x=W;if(s.y>H)s.y=0;if(s.y<0)s.y=H;s.tw+=s.s;const b=(Math.sin(s.tw)+1)*.5;const a=s.z*(.4+b*.6);ctx.beginPath();ctx.arc(s.x,s.y,s.r*s.z,0,Math.PI*2);ctx.fillStyle=s.c+a+')';ctx.fill();if(s.c!=='rgba(255,255,255,'&&b>.7){ctx.beginPath();ctx.arc(s.x,s.y,s.r*s.z*2,0,Math.PI*2);ctx.fillStyle=s.c+(a*.3)+')';ctx.fill();}}}function loop(){draw();requestAnimationFrame(loop);}loop();})();

  log('Bedrock Access Portal initialized');if(!checkExistingAccess()){elements.keyInput.focus();log('Ready for authentication');}
})();
</script>
</body>
</html>
